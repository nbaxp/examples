include: [ "docker-compose.include.yml" ]

services:
  minio:
    image: ${MINIO}
    extends:
      file: docker-compose.extend.yml
      service: base
    networks:
      net:
        ipv4_address: ${MINIO_IP}
    environment:
      - MINIO_DATA_DIR=/data
      - MINIO_DEFAULT_BUCKETS=default
      - MINIO_ROOT_USER=${MINIO_ROOT_USER}
      - MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}
    ports:
      - ${MINIO_PORT_UI}:9000
      - ${MINIO_PORT_API}:9001
    volumes:
      - ${DATA}/minio:/data
    healthcheck:
      test: [ "CMD", "mc", "ready", "local" ]
