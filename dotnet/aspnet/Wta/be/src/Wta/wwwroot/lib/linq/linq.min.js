/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/linq@4.0.3/linq.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t={Identity:function(t){return t},True:function(){return!0},Blank:function(){}},n="boolean",e="number",r="string",o="undefined",u="function",i={"":t.Identity},c=function(n){if(null==n)return t.Identity;if(typeof n===r){let t=i[n];if(null!=t)return t;if(-1===n.indexOf("=>")){const e=new RegExp("[$]+","g");let r,o=0;for(;null!=(r=e.exec(n));)r[0].length>o&&(o=r[0].length);const u=[];for(let t=1;t<=o;t++){let n="";for(let e=0;e<t;e++)n+="$";u.push(n)}const c=u.join(",");return t=new Function(c,"return "+n),i[n]=t,t}{const e=n.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return t=new Function(e[1],e[2].match(/\breturn\b/)?e[2]:"return "+e[2]),i[n]=t,t}}return n},f=function(t,n,e){Object.defineProperty(t,n,{enumerable:!1,configurable:!0,writable:!0,value:e})},a=function(t,n){return t===n?0:t>n?1:-1},l=function(t){null!=t&&t.dispose()},s=function(){return"undefined"!=typeof Symbol&&void 0!==Symbol.iterator},h=0,p=1,y=2,v=function(t,n,e){var r=new m,o=h;this.current=r.current,this.moveNext=function(){try{switch(o){case h:o=p,t();case p:return!!n.apply(r)||(this.dispose(),!1);case y:return!1}}catch(t){throw this.dispose(),t}},this.dispose=function(){if(o==p)try{e()}finally{o=y}}},m=function(){var t=null;this.current=function(){return t},this.yieldReturn=function(n){return t=n,!0},this.yieldBreak=function(){return!1}},d=function(t){this.getEnumerator=t};(d.Utils={}).createLambda=function(t){return c(t)},d.Utils.createEnumerable=function(t){return new d(t)},d.Utils.createEnumerator=function(t,n,e){return new v(t,n,e)},d.Utils.extendTo=function(t){var n,e=t.prototype;t===Array?(n=k.prototype,f(e,"getSource",(function(){return this}))):(n=d.prototype,f(e,"getEnumerator",(function(){return d.from(this).getEnumerator()})));for(let t in n){const r=n[t];e[t]!=r&&(null!=e[t]&&(t+="ByLinq",e[t]==r)||r instanceof Function&&f(e,t,r))}},d.Utils.recallFrom=function(t){var n,e=t.prototype;t===Array?(n=k.prototype,delete e.getSource):(n=d.prototype,delete e.getEnumerator);for(const t in n){const r=n[t];e[t+"ByLinq"]?delete e[t+"ByLinq"]:e[t]==r&&r instanceof Function&&delete e[t]}},d.choice=function(){var n=arguments;return new d((function(){return new v((function(){n=n[0]instanceof Array?n[0]:null!=n[0].getEnumerator?n[0].toArray():n}),(function(){return this.yieldReturn(n[Math.floor(Math.random()*n.length)])}),t.Blank)}))},d.cycle=function(){var n=arguments;return new d((function(){var e=0;return new v((function(){n=n[0]instanceof Array?n[0]:null!=n[0].getEnumerator?n[0].toArray():n}),(function(){return e>=n.length&&(e=0),this.yieldReturn(n[e++])}),t.Blank)}))},d.empty=function(){return new d((function(){return new v(t.Blank,(function(){return!1}),t.Blank)}))},d.from=function(o){if(null==o)return d.empty();if(o instanceof d)return o;if(typeof o==e||typeof o==n)return d.repeat(o,1);if(typeof o==r)return new d((function(){var n=0;return new v(t.Blank,(function(){return n<o.length&&this.yieldReturn(o.charAt(n++))}),t.Blank)}));if(typeof o==u&&0==Object.keys(o).length)return new d((function(){var n;return new v((function(){n=o()[Symbol.iterator]()}),(function(){var t=n.next();return!t.done&&this.yieldReturn(t.value)}),t.Blank)}));if(typeof o!=u){if(typeof o.length==e)return new k(o);if("undefined"!=typeof Symbol&&void 0!==o[Symbol.iterator]){let n;return new d((function(){return new v((function(){n=o[Symbol.iterator]()}),(function(){var t=n.next();return!t.done&&this.yieldReturn(t.value)}),t.Blank)}))}if(typeof o.next==u)return new d((function(){return new v(t.Blank,(function(){var t=o.next();return!t.done&&this.yieldReturn(t.value)}),t.Blank)}))}return new d((function(){var n=[],e=0;return new v((function(){for(const t in o){const e=o[t];e instanceof Function||!Object.prototype.hasOwnProperty.call(o,t)||n.push({key:t,value:e})}}),(function(){return e<n.length&&this.yieldReturn(n[e++])}),t.Blank)}))},d.make=function(t){return d.repeat(t,1)},d.matches=function(n,e,r){return null==r&&(r=""),e instanceof RegExp&&(r+=e.ignoreCase?"i":"",r+=e.multiline?"m":"",e=e.source),-1===r.indexOf("g")&&(r+="g"),new d((function(){var o;return new v((function(){o=new RegExp(e,r)}),(function(){var t=o.exec(n);return!!t&&this.yieldReturn(t)}),t.Blank)}))},d.range=function(n,e,r){return null==r&&(r=1),new d((function(){var o,u=0;return new v((function(){o=n-r}),(function(){return u++<e?this.yieldReturn(o+=r):this.yieldBreak()}),t.Blank)}))},d.rangeDown=function(n,e,r){return null==r&&(r=1),new d((function(){var o,u=0;return new v((function(){o=n+r}),(function(){return u++<e?this.yieldReturn(o-=r):this.yieldBreak()}),t.Blank)}))},d.rangeTo=function(n,e,r){return null==r&&(r=1),new d(n<e?function(){var o;return new v((function(){o=n-r}),(function(){var t=o+=r;return t<=e?this.yieldReturn(t):this.yieldBreak()}),t.Blank)}:function(){var o;return new v((function(){o=n+r}),(function(){var t=o-=r;return t>=e?this.yieldReturn(t):this.yieldBreak()}),t.Blank)})},d.repeat=function(n,e){return null!=e?d.repeat(n).take(e):new d((function(){return new v(t.Blank,(function(){return this.yieldReturn(n)}),t.Blank)}))},d.repeatWithFinalize=function(t,n){return t=c(t),n=c(n),new d((function(){var e;return new v((function(){e=t()}),(function(){return this.yieldReturn(e)}),(function(){null!=e&&(n(e),e=null)}))}))},d.generate=function(n,e){return null!=e?d.generate(n).take(e):(n=c(n),new d((function(){return new v(t.Blank,(function(){return this.yieldReturn(n())}),t.Blank)})))},d.toInfinity=function(n,e){return null==n&&(n=0),null==e&&(e=1),new d((function(){var r;return new v((function(){r=n-e}),(function(){return this.yieldReturn(r+=e)}),t.Blank)}))},d.toNegativeInfinity=function(n,e){return null==n&&(n=0),null==e&&(e=1),new d((function(){var r;return new v((function(){r=n+e}),(function(){return this.yieldReturn(r-=e)}),t.Blank)}))},d.unfold=function(n,e){return e=c(e),new d((function(){var r,o=!0;return new v(t.Blank,(function(){return o?(o=!1,r=n,this.yieldReturn(r)):(r=e(r),this.yieldReturn(r))}),t.Blank)}))},d.defer=function(t){return new d((function(){var n;return new v((function(){n=d.from(t()).getEnumerator()}),(function(){return n.moveNext()?this.yieldReturn(n.current()):this.yieldBreak()}),(function(){l(n)}))}))},d.prototype.traverseBreadthFirst=function(t,n){var e=this;return t=c(t),n=c(n),new d((function(){var r,o=0,u=[];return new v((function(){r=e.getEnumerator()}),(function(){for(;;){if(r.moveNext())return u.push(r.current()),this.yieldReturn(n(r.current(),o));const e=d.from(u).selectMany((function(n){return t(n)}));if(!e.any())return!1;o++,u=[],l(r),r=e.getEnumerator()}}),(function(){l(r)}))}))},d.prototype.traverseDepthFirst=function(t,n){var e=this;return t=c(t),n=c(n),new d((function(){var r,o=[];return new v((function(){r=e.getEnumerator()}),(function(){for(;;){if(r.moveNext()){const e=n(r.current(),o.length);return o.push(r),r=d.from(t(r.current())).getEnumerator(),this.yieldReturn(e)}if(o.length<=0)return!1;l(r),r=o.pop()}}),(function(){try{l(r)}finally{d.from(o).forEach((function(t){t.dispose()}))}}))}))},d.prototype.flatten=function(){var n=this;return new d((function(){var e,r=null;return new v((function(){e=n.getEnumerator()}),(function(){for(;;){if(null!=r){if(r.moveNext())return this.yieldReturn(r.current());r=null}if(e.moveNext()){if(e.current()instanceof Array){l(r),r=d.from(e.current()).selectMany(t.Identity).flatten().getEnumerator();continue}return this.yieldReturn(e.current())}return!1}}),(function(){try{l(e)}finally{l(r)}}))}))},d.prototype.pairwise=function(t){var n=this;return t=c(t),new d((function(){var e;return new v((function(){(e=n.getEnumerator()).moveNext()}),(function(){var n=e.current();return!!e.moveNext()&&this.yieldReturn(t(n,e.current()))}),(function(){l(e)}))}))},d.prototype.scan=function(t,n){var e;null==n?(n=c(t),e=!1):(n=c(n),e=!0);var r=this;return new d((function(){var o,u,i=!0;return new v((function(){o=r.getEnumerator()}),(function(){if(i){if(i=!1,e)return this.yieldReturn(u=t);if(o.moveNext())return this.yieldReturn(u=o.current())}return!!o.moveNext()&&this.yieldReturn(u=n(u,o.current()))}),(function(){l(o)}))}))},d.prototype.select=function(t){if((t=c(t)).length<=1)return new R(this,null,t);var n=this;return new d((function(){var e,r=0;return new v((function(){e=n.getEnumerator()}),(function(){return!!e.moveNext()&&this.yieldReturn(t(e.current(),r++))}),(function(){l(e)}))}))},d.prototype.selectMany=function(t,n){var e=this;return t=c(t),null==n&&(n=function(t,n){return n}),n=c(n),new d((function(){var r,o=void 0,u=0;return new v((function(){r=e.getEnumerator()}),(function(){if(void 0===o&&!r.moveNext())return!1;do{if(null==o){const n=t(r.current(),u++);o=d.from(n).getEnumerator()}if(o.moveNext())return this.yieldReturn(n(r.current(),o.current()));l(o),o=null}while(r.moveNext());return!1}),(function(){try{l(r)}finally{l(o)}}))}))},d.prototype.where=function(t){if((t=c(t)).length<=1)return new x(this,t);var n=this;return new d((function(){var e,r=0;return new v((function(){e=n.getEnumerator()}),(function(){for(;e.moveNext();)if(t(e.current(),r++))return this.yieldReturn(e.current());return!1}),(function(){l(e)}))}))},d.prototype.choose=function(t){t=c(t);var n=this;return new d((function(){var e,r=0;return new v((function(){e=n.getEnumerator()}),(function(){for(;e.moveNext();){const n=t(e.current(),r++);if(null!=n)return this.yieldReturn(n)}return this.yieldBreak()}),(function(){l(e)}))}))},d.prototype.ofType=function(t){var o;switch(t){case Number:o=e;break;case String:o=r;break;case Boolean:o=n;break;case Function:o=u;break;default:o=null}return null===o?this.where((function(n){return n instanceof t})):this.where((function(t){return typeof t===o}))},d.prototype.zip=function(){var t=arguments,n=c(arguments[arguments.length-1]),e=this;if(2==arguments.length){const t=arguments[0];return new d((function(){var r,o,u=0;return new v((function(){r=e.getEnumerator(),o=d.from(t).getEnumerator()}),(function(){return!(!r.moveNext()||!o.moveNext())&&this.yieldReturn(n(r.current(),o.current(),u++))}),(function(){try{l(r)}finally{l(o)}}))}))}return new d((function(){var r,o=0;return new v((function(){var n=d.make(e).concat(d.from(t).takeExceptLast().select(d.from)).select((function(t){return t.getEnumerator()})).toArray();r=d.from(n)}),(function(){if(r.all((function(t){return t.moveNext()}))){const t=r.select((function(t){return t.current()})).toArray();return t.push(o++),this.yieldReturn(n.apply(null,t))}return this.yieldBreak()}),(function(){d.from(r).forEach(l)}))}))},d.prototype.merge=function(){var t=arguments,n=this;return new d((function(){var e,r=-1;return new v((function(){e=d.make(n).concat(d.from(t).select(d.from)).select((function(t){return t.getEnumerator()})).toArray()}),(function(){for(;e.length>0;){r=r>=e.length-1?0:r+1;const t=e[r];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),e.splice(r--,1)}return this.yieldBreak()}),(function(){d.from(e).forEach(l)}))}))},d.prototype.join=function(n,e,r,o,u){e=c(e),r=c(r),o=c(o),u=c(u);var i=this;return new d((function(){var c,f,a=null,s=0;return new v((function(){c=i.getEnumerator(),f=d.from(n).toLookup(r,t.Identity,u)}),(function(){for(;;){if(null!=a){let t=a[s++];if(void 0!==t)return this.yieldReturn(o(c.current(),t));t=null,s=0}if(!c.moveNext())return!1;{const t=e(c.current());a=f.get(t).toArray()}}}),(function(){l(c)}))}))},d.prototype.leftJoin=function(n,e,r,o,u){e=c(e),r=c(r),o=c(o),u=c(u);var i=this;return new d((function(){var c,f,a=null,s=0;return new v((function(){c=i.getEnumerator(),f=d.from(n).toLookup(r,t.Identity,u)}),(function(){for(;;){if(null!=a){let t=a[s++];if(void 0!==t)return this.yieldReturn(o(c.current(),t));t=null,s=0}if(!c.moveNext())return!1;{const t=e(c.current());if(null==(a=f.get(t).toArray())||0==a.length)return this.yieldReturn(o(c.current(),null))}}}),(function(){l(c)}))}))},d.prototype.groupJoin=function(n,e,r,o,u){e=c(e),r=c(r),o=c(o),u=c(u);var i=this;return new d((function(){var c=i.getEnumerator(),f=null;return new v((function(){c=i.getEnumerator(),f=d.from(n).toLookup(r,t.Identity,u)}),(function(){if(c.moveNext()){const t=f.get(e(c.current()));return this.yieldReturn(o(c.current(),t))}return!1}),(function(){l(c)}))}))},d.prototype.all=function(t){t=c(t);var n=!0;return this.forEach((function(e){if(!t(e))return n=!1,!1})),n},d.prototype.any=function(t){t=c(t);var n=this.getEnumerator();try{if(0==arguments.length)return n.moveNext();for(;n.moveNext();)if(t(n.current()))return!0;return!1}finally{l(n)}},d.prototype.isEmpty=function(){return!this.any()},d.prototype.concat=function(){var t=this;if(1==arguments.length){const n=arguments[0];return new d((function(){var e,r;return new v((function(){e=t.getEnumerator()}),(function(){if(null==r){if(e.moveNext())return this.yieldReturn(e.current());r=d.from(n).getEnumerator()}return!!r.moveNext()&&this.yieldReturn(r.current())}),(function(){try{l(e)}finally{l(r)}}))}))}{const n=arguments;return new d((function(){var e;return new v((function(){e=d.make(t).concat(d.from(n).select(d.from)).select((function(t){return t.getEnumerator()})).toArray()}),(function(){for(;e.length>0;){const t=e[0];if(t.moveNext())return this.yieldReturn(t.current());t.dispose(),e.splice(0,1)}return this.yieldBreak()}),(function(){d.from(e).forEach(l)}))}))}},d.prototype.insert=function(t,n){var e=this;return new d((function(){var r,o,u=0,i=!1;return new v((function(){r=e.getEnumerator(),o=d.from(n).getEnumerator()}),(function(){return u==t&&o.moveNext()?(i=!0,this.yieldReturn(o.current())):r.moveNext()?(u++,this.yieldReturn(r.current())):!(i||!o.moveNext())&&this.yieldReturn(o.current())}),(function(){try{l(r)}finally{l(o)}}))}))},d.prototype.alternate=function(t){var n=this;return new d((function(){var e,r,o,u;return new v((function(){o=t instanceof Array||null!=t.getEnumerator?d.from(d.from(t).toArray()):d.make(t),(r=n.getEnumerator()).moveNext()&&(e=r.current())}),(function(){for(;;){if(null!=u){if(u.moveNext())return this.yieldReturn(u.current());u=null}if(null!=e||!r.moveNext()){if(null!=e){const t=e;return e=null,this.yieldReturn(t)}return this.yieldBreak()}e=r.current(),u=o.getEnumerator()}}),(function(){try{l(r)}finally{l(u)}}))}))},d.prototype.contains=function(t,n){n=c(n);var e=this.getEnumerator();try{for(;e.moveNext();)if(n(e.current())===t)return!0;return!1}finally{l(e)}},d.prototype.defaultIfEmpty=function(t){var n=this;return void 0===t&&(t=null),new d((function(){var e,r=!0;return new v((function(){e=n.getEnumerator()}),(function(){return e.moveNext()?(r=!1,this.yieldReturn(e.current())):!!r&&(r=!1,this.yieldReturn(t))}),(function(){l(e)}))}))},d.prototype.distinct=function(t){return this.except(d.empty(),t)},d.prototype.distinctUntilChanged=function(t){t=c(t);var n=this;return new d((function(){var e,r;return new v((function(){e=n.getEnumerator()}),(function(){for(;e.moveNext();){const n=t(e.current());if(r!==n)return r=n,this.yieldReturn(e.current())}return this.yieldBreak()}),(function(){l(e)}))}))},d.prototype.except=function(t,n){n=c(n);var e=this;return new d((function(){var r,o;return new v((function(){r=e.getEnumerator(),o=new N(n),d.from(t).forEach((function(t){o.add(t)}))}),(function(){for(;r.moveNext();){const t=r.current();if(!o.contains(t))return o.add(t),this.yieldReturn(t)}return!1}),(function(){l(r)}))}))},d.prototype.intersect=function(t,n){n=c(n);var e=this;return new d((function(){var r,o,u;return new v((function(){r=e.getEnumerator(),o=new N(n),d.from(t).forEach((function(t){o.add(t)})),u=new N(n)}),(function(){for(;r.moveNext();){const t=r.current();if(!u.contains(t)&&o.contains(t))return u.add(t),this.yieldReturn(t)}return!1}),(function(){l(r)}))}))},d.prototype.sequenceEqual=function(t,n){n=c(n);var e=this.getEnumerator();try{const r=d.from(t).getEnumerator();try{for(;e.moveNext();)if(!r.moveNext()||n(e.current())!==n(r.current()))return!1;return!r.moveNext()}finally{l(r)}}finally{l(e)}},d.prototype.union=function(t,n){n=c(n);var e=this;return new d((function(){var r,o,u;return new v((function(){r=e.getEnumerator(),u=new N(n)}),(function(){var n;if(void 0===o){for(;r.moveNext();)if(n=r.current(),!u.contains(n))return u.add(n),this.yieldReturn(n);o=d.from(t).getEnumerator()}for(;o.moveNext();)if(n=o.current(),!u.contains(n))return u.add(n),this.yieldReturn(n);return!1}),(function(){try{l(r)}finally{l(o)}}))}))},d.prototype.orderBy=function(t,n){return new g(this,t,n,!1)},d.prototype.orderByDescending=function(t,n){return new g(this,t,n,!0)},d.prototype.reverse=function(){var n=this;return new d((function(){var e,r;return new v((function(){e=n.toArray(),r=e.length}),(function(){return r>0&&this.yieldReturn(e[--r])}),t.Blank)}))},d.prototype.shuffle=function(){var n=this;return new d((function(){var e;return new v((function(){e=n.toArray()}),(function(){if(e.length>0){const t=Math.floor(Math.random()*e.length);return this.yieldReturn(e.splice(t,1)[0])}return!1}),t.Blank)}))},d.prototype.weightedSample=function(n){n=c(n);var e=this;return new d((function(){var r,o=0;return new v((function(){r=e.choose((function(t){var e=n(t);return e<=0?null:{value:t,bound:o+=e}})).toArray()}),(function(){if(r.length>0){const t=Math.floor(Math.random()*o)+1;let n=-1,e=r.length;for(;e-n>1;){const o=Math.floor((n+e)/2);r[o].bound>=t?e=o:n=o}return this.yieldReturn(r[e].value)}return this.yieldBreak()}),t.Blank)}))},d.prototype.groupBy=function(t,n,e,r){var o=this;return t=c(t),n=c(n),null!=e&&(e=c(e)),r=c(r),new d((function(){var u;return new v((function(){u=o.toLookup(t,n,r).toEnumerable().getEnumerator()}),(function(){for(;u.moveNext();)return null==e?this.yieldReturn(u.current()):this.yieldReturn(e(u.current().key(),u.current()));return!1}),(function(){l(u)}))}))},d.prototype.partitionBy=function(t,n,e,r){var o,u=this;return t=c(t),n=c(n),r=c(r),null==e?(o=!1,e=function(t,n){return new B(t,n)}):(o=!0,e=c(e)),new d((function(){var i,c,f,a=[];return new v((function(){(i=u.getEnumerator()).moveNext()&&(c=t(i.current()),f=r(c),a.push(n(i.current())))}),(function(){for(var u;1==(u=i.moveNext())&&f===r(t(i.current()));)a.push(n(i.current()));if(a.length>0){const l=e(c,o?d.from(a):a);return u?(c=t(i.current()),f=r(c),a=[n(i.current())]):a=[],this.yieldReturn(l)}return!1}),(function(){l(i)}))}))},d.prototype.buffer=function(t){var n=this;return new d((function(){var e;return new v((function(){e=n.getEnumerator()}),(function(){for(var n=[],r=0;e.moveNext();)if(n.push(e.current()),++r>=t)return this.yieldReturn(n);return n.length>0&&this.yieldReturn(n)}),(function(){l(e)}))}))},d.prototype.aggregate=function(t,n,e){return(e=c(e))(this.scan(t,n,e).last())},d.prototype.average=function(t){t=c(t);var n=0,e=0;return this.forEach((function(r){n+=t(r),++e})),n/e},d.prototype.count=function(n){n=null==n?t.True:c(n);var e=0;return this.forEach((function(t,r){n(t,r)&&++e})),e},d.prototype.max=function(n){return null==n&&(n=t.Identity),this.select(n).aggregate((function(t,n){return t>n?t:n}))},d.prototype.min=function(n){return null==n&&(n=t.Identity),this.select(n).aggregate((function(t,n){return t<n?t:n}))},d.prototype.maxBy=function(t){return t=c(t),this.aggregate((function(n,e){return t(n)>t(e)?n:e}))},d.prototype.minBy=function(t){return t=c(t),this.aggregate((function(n,e){return t(n)<t(e)?n:e}))},d.prototype.sum=function(n){return null==n&&(n=t.Identity),this.select(n).aggregate(0,(function(t,n){return t+n}))},d.prototype.elementAt=function(t){var n,e=!1;if(this.forEach((function(r,o){if(o==t)return n=r,e=!0,!1})),!e)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return n},d.prototype.elementAtOrDefault=function(t,n){var e;void 0===n&&(n=null);var r=!1;return this.forEach((function(n,o){if(o==t)return e=n,r=!0,!1})),r?e:n},d.prototype.first=function(t){if(null!=t)return this.where(t).first();var n,e=!1;if(this.forEach((function(t){return n=t,e=!0,!1})),!e)throw new Error("first:No element satisfies the condition.");return n},d.prototype.firstOrDefault=function(t,n){if(void 0!==t){if(typeof t===u||typeof c(t)===u)return this.where(t).firstOrDefault(void 0,n);n=t}var e,r=!1;return this.forEach((function(t){return e=t,r=!0,!1})),r?e:n},d.prototype.last=function(t){if(null!=t)return this.where(t).last();var n,e=!1;if(this.forEach((function(t){e=!0,n=t})),!e)throw new Error("last:No element satisfies the condition.");return n},d.prototype.lastOrDefault=function(t,n){if(void 0!==t){if(typeof t===u||typeof c(t)===u)return this.where(t).lastOrDefault(void 0,n);n=t}var e,r=!1;return this.forEach((function(t){r=!0,e=t})),r?e:n},d.prototype.single=function(t){if(null!=t)return this.where(t).single();var n,e=!1;if(this.forEach((function(t){if(e)throw new Error("single:sequence contains more than one element.");e=!0,n=t})),!e)throw new Error("single:No element satisfies the condition.");return n},d.prototype.singleOrDefault=function(t,n){if(void 0===n&&(n=null),null!=t)return this.where(t).singleOrDefault(null,n);var e,r=!1;return this.forEach((function(t){if(r)throw new Error("single:sequence contains more than one element.");r=!0,e=t})),r?e:n},d.prototype.skip=function(t){var n=this;return new d((function(){var e,r=0;return new v((function(){for(e=n.getEnumerator();r++<t&&e.moveNext(););}),(function(){return!!e.moveNext()&&this.yieldReturn(e.current())}),(function(){l(e)}))}))},d.prototype.skipWhile=function(t){t=c(t);var n=this;return new d((function(){var e,r=0,o=!1;return new v((function(){e=n.getEnumerator()}),(function(){for(;!o;){if(!e.moveNext())return!1;if(!t(e.current(),r++))return o=!0,this.yieldReturn(e.current())}return!!e.moveNext()&&this.yieldReturn(e.current())}),(function(){l(e)}))}))},d.prototype.take=function(t){var n=this;return new d((function(){var e,r=0;return new v((function(){e=n.getEnumerator()}),(function(){return!!(r++<t&&e.moveNext())&&this.yieldReturn(e.current())}),(function(){l(e)}))}))},d.prototype.takeWhile=function(t){t=c(t);var n=this;return new d((function(){var e,r=0;return new v((function(){e=n.getEnumerator()}),(function(){return!(!e.moveNext()||!t(e.current(),r++))&&this.yieldReturn(e.current())}),(function(){l(e)}))}))},d.prototype.takeExceptLast=function(t){null==t&&(t=1);var n=this;return new d((function(){if(t<=0)return n.getEnumerator();var e,r=[];return new v((function(){e=n.getEnumerator()}),(function(){for(;e.moveNext();){if(r.length==t)return r.push(e.current()),this.yieldReturn(r.shift());r.push(e.current())}return!1}),(function(){l(e)}))}))},d.prototype.takeFromLast=function(t){if(t<=0||null==t)return d.empty();var n=this;return new d((function(){var e,r,o=[];return new v((function(){e=n.getEnumerator()}),(function(){for(;e.moveNext();)o.length==t&&o.shift(),o.push(e.current());return null==r&&(r=d.from(o).getEnumerator()),!!r.moveNext()&&this.yieldReturn(r.current())}),(function(){l(r)}))}))},d.prototype.indexOf=function(t){var n=null;return typeof t===u?this.forEach((function(e,r){if(t(e,r))return n=r,!1})):this.forEach((function(e,r){if(e===t)return n=r,!1})),null!==n?n:-1},d.prototype.lastIndexOf=function(t){var n=-1;return typeof t===u?this.forEach((function(e,r){t(e,r)&&(n=r)})):this.forEach((function(e,r){e===t&&(n=r)})),n},d.prototype.cast=function(){return this},d.prototype.asEnumerable=function(){return d.from(this)},d.prototype.toArray=function(){var t=[];return this.forEach((function(n){t.push(n)})),t},d.prototype.toLookup=function(t,n,e){t=c(t),n=c(n),e=c(e);var r=new N(e);return this.forEach((function(e){var o=t(e),u=n(e),i=r.get(o);void 0!==i?i.push(u):r.add(o,[u])})),new S(r)},d.prototype.toObject=function(t,n){t=c(t),n=c(n);var e={};return this.forEach((function(r){e[t(r)]=n(r)})),e},d.prototype.toDictionary=function(t,n,e){t=c(t),n=c(n),e=c(e);var r=new N(e);return this.forEach((function(e){r.add(t(e),n(e))})),r},d.prototype.toJSONString=function(t,n){if(typeof JSON===o||null==JSON.stringify)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),t,n)},d.prototype.toJoinedString=function(n,e){return null==n&&(n=""),null==e&&(e=t.Identity),this.select(e).toArray().join(n)},d.prototype.doAction=function(t){var n=this;return t=c(t),new d((function(){var e,r=0;return new v((function(){e=n.getEnumerator()}),(function(){return!!e.moveNext()&&(t(e.current(),r++),this.yieldReturn(e.current()))}),(function(){l(e)}))}))},d.prototype.forEach=function(t){t=c(t);var n=0,e=this.getEnumerator();try{for(;e.moveNext()&&!1!==t(e.current(),n++););}finally{l(e)}},d.prototype.force=function(){var t=this.getEnumerator();try{for(;t.moveNext(););}finally{l(t)}},d.prototype.letBind=function(t){t=c(t);var n=this;return new d((function(){var e;return new v((function(){e=d.from(t(n)).getEnumerator()}),(function(){return!!e.moveNext()&&this.yieldReturn(e.current())}),(function(){l(e)}))}))},d.prototype.share=function(){var n,e=this,r=!1;return new E((function(){return new v((function(){null==n&&(n=e.getEnumerator())}),(function(){if(r)throw new Error("enumerator is disposed");return!!n.moveNext()&&this.yieldReturn(n.current())}),t.Blank)}),(function(){r=!0,l(n)}))},d.prototype.memoize=function(){var n,e,r=this,o=!1;return new E((function(){var u=-1;return new v((function(){null==e&&(e=r.getEnumerator(),n=[])}),(function(){if(o)throw new Error("enumerator is disposed");return u++,n.length<=u?!!e.moveNext()&&this.yieldReturn(n[u]=e.current()):this.yieldReturn(n[u])}),t.Blank)}),(function(){o=!0,l(e),n=null}))},s()&&(d.prototype[Symbol.iterator]=function(){return{enumerator:this.getEnumerator(),next:function(){return this.enumerator.moveNext()?{done:!1,value:this.enumerator.current()}:{done:!0}}}}),d.prototype.catchError=function(t){t=c(t);var n=this;return new d((function(){var e;return new v((function(){e=n.getEnumerator()}),(function(){try{return!!e.moveNext()&&this.yieldReturn(e.current())}catch(n){return t(n),!1}}),(function(){l(e)}))}))},d.prototype.finallyAction=function(t){t=c(t);var n=this;return new d((function(){var e;return new v((function(){e=n.getEnumerator()}),(function(){return!!e.moveNext()&&this.yieldReturn(e.current())}),(function(){try{l(e)}finally{t()}}))}))},d.prototype.log=function(t){return t=c(t),this.doAction((function(n){typeof console!==o&&console.log(t(n))}))},d.prototype.trace=function(t,n){return null==t&&(t="Trace"),n=c(n),this.doAction((function(e){typeof console!==o&&console.log(t,n(e))}))};var g=function(t,n,e,r,o){this.source=t,this.keySelector=c(n),this.descending=r,this.parent=o,e&&(this.comparer=c(e))};g.prototype=new d,g.prototype.createOrderedEnumerable=function(t,n,e){return new g(this.source,t,n,e,this)},g.prototype.thenBy=function(t,n){return this.createOrderedEnumerable(t,n,!1)},g.prototype.thenByDescending=function(t,n){return this.createOrderedEnumerable(t,n,!0)},g.prototype.getEnumerator=function(){var n,e,r=this,o=0;return new v((function(){n=[],e=[],r.source.forEach((function(t,r){n.push(t),e.push(r)}));var t=w.create(r,null);t.GenerateKeys(n),e.sort((function(n,e){return t.compare(n,e)}))}),(function(){return o<e.length&&this.yieldReturn(n[e[o++]])}),t.Blank)};var w=function(t,n,e,r){this.keySelector=t,this.descending=e,this.child=r,this.comparer=n,this.keys=null};w.create=function(t,n){var e=new w(t.keySelector,t.comparer,t.descending,n);return null!=t.parent?w.create(t.parent,e):e},w.prototype.GenerateKeys=function(t){var n=t.length,e=this.keySelector,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o]);this.keys=r,null!=this.child&&this.child.GenerateKeys(t)},w.prototype.compare=function(t,n){var e=this.comparer?this.comparer(this.keys[t],this.keys[n]):a(this.keys[t],this.keys[n]);return 0==e?null!=this.child?this.child.compare(t,n):a(t,n):this.descending?-e:e};var E=function(t,n){this.dispose=n,d.call(this,t)};E.prototype=new d;var k=function(t){this.getSource=function(){return t}};k.prototype=new d,k.prototype.any=function(t){return null==t?this.getSource().length>0:d.prototype.any.apply(this,arguments)},k.prototype.count=function(t){return null==t?this.getSource().length:d.prototype.count.apply(this,arguments)},k.prototype.elementAt=function(t){var n=this.getSource();return 0<=t&&t<n.length?n[t]:d.prototype.elementAt.apply(this,arguments)},k.prototype.elementAtOrDefault=function(t,n){void 0===n&&(n=null);var e=this.getSource();return 0<=t&&t<e.length?e[t]:n},k.prototype.first=function(t){var n=this.getSource();return null==t&&n.length>0?n[0]:d.prototype.first.apply(this,arguments)},k.prototype.firstOrDefault=function(t,n){if(void 0!==t)return d.prototype.firstOrDefault.apply(this,arguments);n=t;var e=this.getSource();return e.length>0?e[0]:n},k.prototype.last=function(t){var n=this.getSource();return null==t&&n.length>0?n[n.length-1]:d.prototype.last.apply(this,arguments)},k.prototype.lastOrDefault=function(t,n){if(void 0!==t)return d.prototype.lastOrDefault.apply(this,arguments);n=t;var e=this.getSource();return e.length>0?e[e.length-1]:n},k.prototype.skip=function(n){var e=this.getSource();return new d((function(){var r;return new v((function(){r=n<0?0:n}),(function(){return r<e.length&&this.yieldReturn(e[r++])}),t.Blank)}))},k.prototype.takeExceptLast=function(t){return null==t&&(t=1),this.take(this.getSource().length-t)},k.prototype.takeFromLast=function(t){return this.skip(this.getSource().length-t)},k.prototype.reverse=function(){var n=this.getSource();return new d((function(){var e;return new v((function(){e=n.length}),(function(){return e>0&&this.yieldReturn(n[--e])}),t.Blank)}))},k.prototype.sequenceEqual=function(t,n){return(!(t instanceof k||t instanceof Array)||null!=n||d.from(t).count()==this.count())&&d.prototype.sequenceEqual.apply(this,arguments)},k.prototype.toJoinedString=function(t,n){var e=this.getSource();return null==n&&e instanceof Array?(null==t&&(t=""),e.join(t)):d.prototype.toJoinedString.apply(this,arguments)},k.prototype.getEnumerator=function(){var n=this.getSource(),e=-1;return{current:function(){return n[e]},moveNext:function(){return++e<n.length},dispose:t.Blank}};var x=function(t,n){this.prevSource=t,this.prevPredicate=n};x.prototype=new d,x.prototype.where=function(t){if((t=c(t)).length<=1){const n=this.prevPredicate,e=function(e){return n(e)&&t(e)};return new x(this.prevSource,e)}return d.prototype.where.call(this,t)},x.prototype.select=function(t){return(t=c(t)).length<=1?new R(this.prevSource,this.prevPredicate,t):d.prototype.select.call(this,t)},x.prototype.getEnumerator=function(){var t,n=this.prevPredicate,e=this.prevSource;return new v((function(){t=e.getEnumerator()}),(function(){for(;t.moveNext();)if(n(t.current()))return this.yieldReturn(t.current());return!1}),(function(){l(t)}))};var R=function(t,n,e){this.prevSource=t,this.prevPredicate=n,this.prevSelector=e};R.prototype=new d,R.prototype.where=function(t){return(t=c(t)).length<=1?new x(this,t):d.prototype.where.call(this,t)},R.prototype.select=function(t){if((t=c(t)).length<=1){const n=this.prevSelector,e=function(e){return t(n(e))};return new R(this.prevSource,this.prevPredicate,e)}return d.prototype.select.call(this,t)},R.prototype.getEnumerator=function(){var t,n=this.prevPredicate,e=this.prevSelector,r=this.prevSource;return new v((function(){t=r.getEnumerator()}),(function(){for(;t.moveNext();)if(null==n||n(t.current()))return this.yieldReturn(e(t.current()));return!1}),(function(){l(t)}))};var N=function(){var n=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e=function(t){return null===t?"null":void 0===t?"undefined":typeof t.toString===u?t.toString():Object.prototype.toString.call(t)},r=function(t,n){this.key=t,this.value=n,this.prev=null,this.next=null},o=function(){this.first=null,this.last=null};o.prototype={addLast:function(t){null!=this.last?(this.last.next=t,t.prev=this.last,this.last=t):this.first=this.last=t},replace:function(t,n){null!=t.prev?(t.prev.next=n,n.prev=t.prev):this.first=n,null!=t.next?(t.next.prev=n,n.next=t.next):this.last=n},remove:function(t){null!=t.prev?t.prev.next=t.next:this.first=t.next,null!=t.next?t.next.prev=t.prev:this.last=t.prev}};var i=function(n){this.countField=0,this.entryList=new o,this.buckets={},this.compareSelector=null==n?t.Identity:n};return i.prototype={add:function(t,o){var u=this.compareSelector(t),i=e(u),c=new r(t,o);if(n(this.buckets,i)){const t=this.buckets[i];for(let n=0;n<t.length;n++)if(this.compareSelector(t[n].key)===u)return this.entryList.replace(t[n],c),void(t[n]=c);t.push(c)}else this.buckets[i]=[c];this.countField++,this.entryList.addLast(c)},get:function(t){var r=this.compareSelector(t),o=e(r);if(n(this.buckets,o)){var u=this.buckets[o];for(let t=0;t<u.length;t++){const n=u[t];if(this.compareSelector(n.key)===r)return n.value}}},set:function(t,o){var u=this.compareSelector(t),i=e(u);if(n(this.buckets,i)){const n=this.buckets[i];for(let e=0;e<n.length;e++)if(this.compareSelector(n[e].key)===u){const u=new r(t,o);return this.entryList.replace(n[e],u),n[e]=u,!0}}return!1},contains:function(t){var r=this.compareSelector(t),o=e(r);if(!n(this.buckets,o))return!1;var u=this.buckets[o];for(let t=0;t<u.length;t++)if(this.compareSelector(u[t].key)===r)return!0;return!1},clear:function(){this.countField=0,this.buckets={},this.entryList=new o},remove:function(t){var r=this.compareSelector(t),o=e(r);if(n(this.buckets,o)){var u=this.buckets[o];for(let t=0;t<u.length;t++)if(this.compareSelector(u[t].key)===r)return this.entryList.remove(u[t]),u.splice(t,1),0==u.length&&delete this.buckets[o],void this.countField--}},count:function(){return this.countField},toEnumerable:function(){var n=this;return new d((function(){var e;return new v((function(){e=n.entryList.first}),(function(){if(null!=e){const t={key:e.key,value:e.value};return e=e.next,this.yieldReturn(t)}return!1}),t.Blank)}))}},i}(),S=function(t){this.count=function(){return t.count()},this.get=function(n){return d.from(t.get(n))},this.contains=function(n){return t.contains(n)},this.toEnumerable=function(){return t.toEnumerable().select((function(t){return new B(t.key,t.value)}))}},B=function(t,n){this.key=function(){return t},k.call(this,n)};B.prototype=new k;export{d as default};
//# sourceMappingURL=/sm/e56330a41e879e4aae68d9fff5d8a79f2ce053c05c67a5d11c6e0cafac23f75b.map