# IoT

数据以MQTT方式上报，MQTT主题发布到Kafka，应用从Kafka订阅设备的数据和事件

功能定义了设备的属性、事件和服务，一个产品关联多个功能，设备是产品的实例

命令定义了对设备的具体操作，即调用的服务和参数

场景是一组命令的集合，可以作为一组按钮提供给用户调用

定时器根据规则调用命令或场景

触发器定义了对设备属性或事件的响应，触发时调用命令或场景

## 数据上报

```mermaid
flowchart LR
设备-->设备接入层-->MQTT-->Kafka-->IoT

```
## 功能模块

```mermaid
flowchart LR
IoT-->1[设备管理]
1-->产品分类
1-->功能管理
1-->产品管理
1-->设备管理
```

## 类图

```mermaid
classDiagram

设备--o产品
产品--o产品分类
功能--o产品功能
产品--o产品功能
```

## 产品功能

```mermaid
flowchart LR
功能-->属性-->静态属性
属性-->动态属性-->设备数据
动态属性-->设备状态
功能-->API-->参数
```

```mermaid
flowchart LR
智能门锁-->属性-->所属厂家
属性-->动态属性-->设备数据-->开关状态
动态属性-->设备状态-->警报正常
功能-->API-->开关接口-->开关参数
```